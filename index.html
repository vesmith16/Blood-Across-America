<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blood Across America</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <!-- Blood Drops -->
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <link rel="icon" sizes="32x32" href="images/favicon-32x32.png" type="image/png">
    <link rel="icon" sizes="16x16" href="images/favicon-16x16.png" type="image/png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #e63946;
            color: white;
            text-align: center;
            padding: 1rem 0;
        }
        nav {
            background-color: #333;
            overflow: hidden;
            display: flex;
            justify-content: center;
        }
        nav a {
            color: white;
            padding: 14px 20px;
            text-decoration: none;
            text-align: center;
        }
        nav a:hover {
            background-color: #575757;
        }
        nav a.active {
            background-color: #e63946;
            color: white;
        }
        section {
            display: none;
            padding: 20px;
        }
        section.active {
            display: block;
        }
        #map {
            height: 500px;
            width: 100%;
        }
        .container {
            margin: 20px;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
            margin: 20px auto;
        }
        form label {
            font-weight: bold;
        }
        form input, form select, form textarea, form button {
            padding: 10px;
            font-size: 1rem;
        }
        form button {
            background-color: #e63946;
            color: white;
            border: none;
            cursor: pointer;
        }
        form button:hover {
            background-color: #d62828;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        table th, table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        table th {
            background-color: #e63946;
            color: white;
        }
        .svg-map svg {
            width: 80%;
            height: auto;
            margin: 0 auto;
            display: block;
        }
        .highlight {
            background-color: yellow; /* Highlight color */
            transition: background-color 0.5s ease; /* Smooth transition */
        }
        .fade-highlight {
            background-color: transparent; /* Fade to transparent */
        }
        .hidden {
            visibility: hidden;
            height: 0;
            overflow: hidden;
        }
        .mini-svg-map {
            width: 100%;
            height: auto;
            margin: 0 auto;
            display: block;
            padding: 0;
        }
        .content-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap; /* Ensures content wraps when needed */
            gap: 20px;
            margin-top: 20px;
        }

        .text-box {
            text-align: left;
            max-width: 60%;
            border: 3px solid black;
            background-color: #F29CA2;
            border-radius: 30px;
            padding: 20px;
            color: black;
        }

        .profile-image {
            width: 300px;
            height: auto;
            margin-left: 20px;
        }

        @media (max-width: 768px) {
            nav {
                display: none;
            }
            .mobile-menu {
                display: block;
                background-color: #333;
                padding: 10px;
            }
            .mobile-menu select {
                width: 100%;
                padding: 10px;
                background-color: #e63946;
                color: white;
                border: none;
                font-size: 1rem;
            }
            .content-container {
                flex-direction: column;
                align-items: center;
            }
            .text-box {
                max-width: 90%;
                margin-bottom: 20px;
            }
            .profile-image {
                margin-left: 0;
            }
        }

        @media (min-width: 769px) {
            .mobile-menu {
                display: none;
            }
        }

    </style>
</head>
<body>
    <header>
        <h1>Blood Across America</h1>
        <p>A journey to donate blood & inspire others in all 50 states</p>
    </header>

    <nav>
        <a href="#home" class="tab-link" data-tab="home">Home</a>
        <a href="#about" class="tab-link" data-tab="about">About</a>
        <a href="donation-info" class="tab-link" data-tab="donation-info">Donation Information</a>
        <a href="elanco" class="tab-link" data-tab="elanco">Elanco Blood Drive</a>
        <a href="#submit-donation" class="tab-link" data-tab="submit-donation">Submit Your Donation</a>
        <a href="#state-map" class="tab-link" data-tab="state-map">State Map</a>
        <a href="#pinned-map" class="tab-link" data-tab="pinned-map">Pinned Map</a>
        <a href="#media" class="tab-link" data-tab="media">Media</a>
        <a href="#contact-us" class="tab-link" data-tab="contact-us">Contact Us</a>
    </nav>

    <div class="mobile-menu">
        <select id="mobileMenu">
            <option value="home">Home</option>
            <option value="about">About</option>
            <option value="donation-info">Donation Information</option>
            <option value="elanco">Elanco Blood Drive</option>
            <option value="submit-donation">Submit Your Donation</option>
            <option value="state-map">State Map</option>
            <option value="pinned-map">Pinned Map</option>
            <option value="contact-us">Contact Us</option>
        </select>
    </div>

    <section id="home" class="active" style="font-family: Arial, sans-serif; line-height: 1.6; max-width: 1000px; margin: 0 auto;">
        <h2 style="text-align: center; font-size: 2em; color: #b22222; margin-bottom: 20px;">Hello, welcome to Blood Across America!</h2>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            Welcome to Blood Across America, an initiative dedicated to a mission close to my heart… saving lives through blood and platelet donations. My personal mission is to donate blood and platelets in all 50 states and inspire you to join me in making a difference through this life-saving act.
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            The purpose of this Blood Across America website is to inspire you to make a profound difference in people’s lives as the impact is so much greater than just saving a life! You can 
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            Please consider giving a few moments of your life to save a lifetime of moments that would have been lost forever!

        </p>
    
        <h3 style="text-align: center; font-size: 1.8em; color: #b22222; margin-top: 80px;">Vinton’s Journey</h3>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            My inspiration for this journey began with a single donation, driven by the desire to help others in need. Over time, I realized the incredible impact blood donations have on lives and decided to set an ambitious goal: donating blood in all 50 states. This mission not only allowed me to give back but also inspired countless others to join this life-saving cause.
        </p>
    
        <div style="display: flex; flex-wrap: wrap; gap: 20px; margin-left: 50px; margin-right: 50px;">
            <div style="flex: 1 1 300px;">
                <strong style="text-align: left; font-size: 1.2em; margin-bottom: 20px;">
                    Here’s what you’ll find on this site:
                </strong>
                <ul style="list-style-type: none; padding: 0; max-width: 600px;">
                    <li style="margin-bottom: 10px;">
                        <strong style="color: #b22222;">My progress:</strong> Follow my journey and see which states I've donated in so far.
                    </li>
                    <li style="margin-bottom: 10px;">
                        <strong style="color: #b22222;">50 States Contributions:</strong> Explore our maps to see where donations have already been made and where help is still needed.
                    </li>
                    <li style="margin-bottom: 10px;">
                        <strong style="color: #b22222;">Submit Your Donation:</strong> If you donated blood for this cause, let us know! Your contribution will make a difference in achieving our goal.
                    </li>
                    <li style="margin-bottom: 10px;">
                        <strong style="color: #b22222;">Encouragement to Donate:</strong> Learn how easy it is to donate blood and the lifesaving impact it can have.
                    </li>
                </ul>
            </div>
            <div style="flex: 1 1 300px;">
                <p style="text-align: center; font-size: 1.2em; margin-top: 30px;">
                    Whether you're part of the Elanco family,a customer, a friend, or someone who stumbled upon this page, we invite you 
                    to be part of this life-changing mission. Together, we can ensure that blood donations touch every corner of 
                    the United States.
                </p>
                <p style="text-align: center; font-size: 1.2em; margin-top: 20px;">
                    <strong style="color: #b22222;">Let’s make Hawaii the celebration of a nationwide impact.</strong> Join us in saving lives—one state, one donation at a time!
                </p>
            </div>
        </div>
    </section>
    
    <section id="pinned-map" class="active hidden">
        <h2 style="text-align: center;">Map of all donation pins</h2>
        <div id="map" style="margin: 0 auto; max-width: 1000px;"></div>
    </section>

    <section id="elanco" style="padding: 20px; margin: 0 auto; max-width: 1000px;">
        <h1 style="text-align: center;">Welcome Elanco employees, customers, and friends!</h1>
        <div style="display: flex; justify-content: center; gap: 10px;">
            <img src="images/Elanco Logo.jpg" style="border: 1px solid #ccc; width: auto; height: 225px;">
        </div>
        <h3 style="text-align: center;">2025 Elanco Animal Health National Blood Drive</h3>
        <p style="text-align: center;">Vinton will reach his 50th State Milestone Donation on World Blood Day, June 14, 2025, in Hawaii. To make an even greater impact this year, he is inviting is colleagues, customers and friends at Elanco Animal Health to join him on this journey and inspire even more blood donations in all 50 states! </p>
        <h3 style="margin-top: 60px; margin-bottom: 20px; text-align: center;">Our path to donations in all 50 states!</h3>
        <p style="text-align: center;">Click the map to go to the State Map tab!</p>
        <div class="mini-svg-map" style="width: 100%; max-width: 600px; margin: 0; height: auto">
        </div>
    </section>

    <section id="about" style="padding: 20px; margin: 0 auto; max-width: 1000px;">
        <h2 style="text-align: center;">About</h2>
        <div class="content-container">
            <div class="text-box">
                <p><strong>
                    Hello! I’m Vinton Smith, a sales representative for Elanco Animal Health. Over the years, I’ve donated blood in 49 of the 50 states, with Hawaii being the final state on my list. Before I make my final donation in Hawaii, my mission is to encourage Elanco employees to donate blood in all 50 states. 
                </strong>
                </p>
                <p style="margin-bottom: 20px;"><strong>
                    This initiative is deeply personal to me, stemming from my Eagle Scout project, where I worked to educate the public about the critical importance of blood donation. This website is designed to not only track and promote blood donations but to inspire others to join this life-saving mission. Together, we can make a difference!
                </strong>
                </p>
                <p><strong>
                    This initiative is more than just a goal—it's a collective effort to impact countless lives, uniting the Elanco community under a shared purpose of compassion and generosity. Together, we have the power to reach every corner of the nation, demonstrating that one small act—donating blood—can create ripples of hope and healing everywhere. Let’s make 2025 a year of action, unity, and life-saving impact!
                </strong>
                </p>
            </div>            
            <img src="images/VintonSmithPicture.jpeg" class="profile-image" alt="Picture of Vinton Smith">
        </div>        

       <h3 style="text-align: center;">My Donation Images</h3>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
            <img src="images/Wilkes barre.jpg" alt="Wilkes Barre Donation" style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
            <img src="images/Vitalant.jpg" alt="Vitalant" style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
        </div>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px;">
            <img src="images/Penn State Hersey.jpg" alt="Penn State Hershey" style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
            <img src="images/Platelets.jpg" alt="Donated Platelets" style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
        </div>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px;">
            <img src="images/26 - 2023-07-07 - Frederick, MD (1)_1.jpg" alt="Frederick" style="border: 1px solid #ccc; max-width: 100%; height: 350px;">
        </div>
        <h3 style="text-align: center; margin-top: 100px;">Progress towards my state blood donations - 49 States Completeds:</h3>
        <img src="images/Map - Whole Blood.jpg" style="width: 100%; max-width: 1000px; margin: 0 auto; display: block;">
        <h3 style="text-align: center; margin-top: 100px;">I am also now working towards a new goal of donating platelets in all 50 states. Here is my progress:</h3>
        <img src="images/Map - Platelets.jpg" style="width: 100%; max-width: 1000px; margin: 0 auto; display: block;">
        <h3 style="text-align: center; font-size: 1.8em; color: #b22222; margin-top: 80px;">Vinton’s Blood Donation Map</h3>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            Explore my journey through an interactive map showcasing my blood and platelet donations across the United States. Each state is color-coded to reflect the milestones achieved and the incredible support from communities nationwide.
        </p>
        <div style="text-align: center; margin-bottom: 40px;">
            <iframe src="https://www.google.com/maps/d/u/1/embed?mid=1bFCFMWA6mwvJH_6T_faOmq7DaROSJRv_&ehbc=2E312F" style="width: 100%; height: 400px; border: 0;" allowfullscreen="" loading="lazy"></iframe>
        </div>
    
        <h3 style="text-align: center; font-size: 1.8em; color: #b22222; margin-top: 80px;">Final Two States</h3>
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 20px;">
            <strong>Alaska:</strong> One of the highlights of my journey was the incredible support from Alaska Airlines. They flew me out to Alaska for my donation, generously contributed $10,000 to the Blood Bank of Alaska, and are even flying me to Hawaii as part of this milestone. Their commitment and kindness have made this experience unforgettable, and I’ll always cherish the memories and the meaningful support they’ve provided.
        </p>
        <div style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-top: 20px;">
            <img src="images/alaska 2.jpg" alt="Alaska blood center." style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
            <img src="images/alaska.jpg" alt="After my donation." style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
            <img src="images/Alaska 49.jpg" alt="Alaska Airlines donation." style="border: 1px solid #ccc; max-width: 100%; height: 250px;">
        </div>        
        
        <p style="text-align: center; font-size: 1.2em; margin-bottom: 80px; margin-top: 40px;">
            <strong>Hawaii:</strong> The grand finale of my mission is set to take place in Hawaii. I’m excited to share my upcoming plans for this final step, where I will complete my journey and celebrate this life-saving adventure with friends, family, and supporters.
        </p>
        </section>
    
    <section id="media" style="padding: 20px; margin: 0 auto; max-width: 1000px;">
        <h2>Pennsylvania:</h2>
        <ul>
            <li>
                <a href="https://www.abc27.com/community/gettysburg-man-pledges-to-donate-blood-in-all-50-states/" target="_blank">Harrisburg, PA - Gettysburg man pledges to donate blood in all 50 states</a>
                - 
                <a href="https://youtu.be/jW4mqD1O3m0?si=YsAV9YGMkoMsPuN8" target="_blank">Video</a>
            </li>
            <li>
                <a href="https://www.gettysburgtimes.com/news/local/article_82a7ca10-45ce-11ef-9d27-affe8f64b941.html" target="_blank">Gettysburg Times, Gettysburg, PA: Local blood donor close to finishing 50-state goal | Local News</a>
            </li>
        </ul>
    
        <h2>Wisconsin:</h2>
        <ul>
            <li>
                <a href="https://www.cbs58.com/news/it-does-make-a-significant-impact-man-visits-wisconsin-on-quest-to-donate-blood-in-all-50-states" target="_blank">Pewaukee, WI - 'It does make a significant impact': Man visits Wisconsin on quest to donate blood in all 50 states</a>
                -
                <a href="https://youtu.be/UHkz7PG_mWM?si=XIhKpwOPjmQINLYq" target="_blank">Video</a>
            </li>
        </ul>
    
        <h2>Alaska:</h2>
        <ul>
            <li>
                <a href="https://www.youralaskalink.com/health/meet-vinton-smith-a-man-on-mission-to-donate-blood-in-all-50-states/article_33a5d4e6-3afe-11ef-b721-affe683c81a8.html" target="_blank">Anchorage, Alaska - Meet Vinton Smith, a man on mission to donate blood in all 50 states</a>
                -
                <a href="https://youtu.be/LaUzsG0CEMY?si=CD7mvFMBvpK41FlF" target="_blank">Video</a>
            </li>
            <li><a href="https://news.alaskaair.com/community/guest-on-mission-donate-blood-all-50-states-alaska-airlines/" target="_blank">Alaska Airlines: Man on a mission: Alaska Airlines flies Vinton Smith to 49th state for blood donation - Alaska Airlines News</a></li>
        </ul>
    
        <h2>Idaho:</h2>
        <ul>
            <li><a href="https://www.postregister.com/news/local/man-donating-blood-in-50-states-to-raise-awareness-for-national-blood-shortage/article_48c73032-66f0-11ee-b4df-df742161b581.html" target="_blank">Idaho Falls, Idaho - Man donating blood in 50 states to raise awareness for national blood shortage</a></li>
            <li><a href="https://www.kivitv.com/news/man-on-a-mission-to-donate-blood-in-all-50-states" target="_blank">Boise, Idaho - Man on a mission to donate blood in all 50 States</a></li>
            <li><a href="https://localnews8.com/news/idaho-falls/2023/10/09/pennsylvania-man-on-a-mission-to-donate-blood-in-all-50-states/" target="_blank">Boise, Idaho - Pennsylvania man on a mission to donate blood in all 50 states</a></li>
        </ul>
    
        <h2>Nevada:</h2>
        <ul>
            <li>
                <a href="https://news3lv.com/news/local/man-on-a-mission-stops-in-las-vegas-to-donate-blood-in-all-50-states-vitalant-donor-center-vinton-smith-nevada" target="_blank">Las Vegas, NV - Man on a mission stops in Las Vegas to donate blood in all 50 states</a>
                -
                <a href="https://www.facebook.com/watch/?v=1797237104023364" target="_blank">Facebook Video</a>
            </li>
        </ul>
    
        <h2>Ohio:</h2>
        <ul>
            <li><a href="https://nohredcross.org/tag/vinton-smith/" target="_blank">Cleveland, OH - Vinton Smith | NOHredcross</a></li>
        </ul>
    
        <h2>Kentucky:</h2>
        <ul>
            <li><a href="https://www.wvlt.tv/video/2024/01/04/man-mission-donate-all-50-states-during-national-blood-donor-month/" target="_blank">Lexington, KY - Man on a mission to donate in all 50 states during National Blood Donor Month</a></li>
            <li><a href="https://www.kybloodcenter.org/donor-stories/vinton-smith" target="_blank">Lexington, KY - Vinton Smith | Kentucky Blood Center</a></li>
        </ul>
    </section>    

    <section id="donation-info" style="font-family: Arial, sans-serif; background-color: #f9f9f9; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
        <h2 style="text-align: center; color: #333;">How and Where to Donate Blood Today!</h2>
        <ul style="list-style-type: none; padding: 0;">
            <li style="margin: 10px 0; text-align: center;">
                <a href="https://americasblood.org/for-donors/find-a-blood-center/" target="_blank" style="text-decoration: none; color: #007BFF; font-size: 16px;">&#9654; Find a Blood Center Near You - America's Blood Centers</a>
            </li>
            <li style="margin: 10px 0; text-align: center;">
                <a href="https://www.redcrossblood.org/give.html/find-drive?cid=p-max&med=cpc&source=google&scode=RSG00000E017&gclsrc=aw.ds&gad_source=1&gbraid=0AAAAADx8NHQE5aONNAPdxP0sMxA4seGao&gclid=Cj0KCQiA4fi7BhC5ARIsAEV1YiYHQpnvtS8XilPa7vcN347QSddsqiRhHowImsR-JsSYvPnGupVUSzkaAmldEALw_wcB" target="_blank" style="text-decoration: none; color: #007BFF; font-size: 16px;">&#9654; Locate a Blood Drive - American Red Cross</a>
            </li>
            <li style="margin: 10px 0; text-align: center;">
                <a href="https://www.hhs.gov/givingequalsliving/giveblood/giving-process" target="_blank" style="text-decoration: none; color: #007BFF; font-size: 16px;">&#9654; Learn About the Blood Donation Process - HHS</a>
            </li>
        </ul>
    </section>

    <section id="submit-donation">
        <h2 style="text-align: center;">Submit Your Donation</h2>
        <h3 style="text-align: center;">Please share your donation and help us impact even more lives!</h3>

        <form id="donationForm">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" placeholder="Enter your email" required>
    
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" placeholder="Enter your name" required>
    
            <label for="city">City:</label>
            <input type="text" id="city" name="city" placeholder="Enter your city" required>
    
            <label for="state">State:</label>
            <select id="state" name="state" required>
                <option value="">Select your state</option>
                <option value="Alabama">Alabama</option>
                <option value="Alaska">Alaska</option>
                <option value="Arizona">Arizona</option>
                <option value="Arkansas">Arkansas</option>
                <option value="California">California</option>
                <option value="Colorado">Colorado</option>
                <option value="Connecticut">Connecticut</option>
                <option value="Delaware">Delaware</option>
                <option value="Florida">Florida</option>
                <option value="Georgia">Georgia</option>
                <option value="Hawaii">Hawaii</option>
                <option value="Idaho">Idaho</option>
                <option value="Illinois">Illinois</option>
                <option value="Indiana">Indiana</option>
                <option value="Iowa">Iowa</option>
                <option value="Kansas">Kansas</option>
                <option value="Kentucky">Kentucky</option>
                <option value="Louisiana">Louisiana</option>
                <option value="Maine">Maine</option>
                <option value="Maryland">Maryland</option>
                <option value="Massachusetts">Massachusetts</option>
                <option value="Michigan">Michigan</option>
                <option value="Minnesota">Minnesota</option>
                <option value="Mississippi">Mississippi</option>
                <option value="Missouri">Missouri</option>
                <option value="Montana">Montana</option>
                <option value="Nebraska">Nebraska</option>
                <option value="Nevada">Nevada</option>
                <option value="New Hampshire">New Hampshire</option>
                <option value="New Jersey">New Jersey</option>
                <option value="New Mexico">New Mexico</option>
                <option value="New York">New York</option>
                <option value="North Carolina">North Carolina</option>
                <option value="North Dakota">North Dakota</option>
                <option value="Ohio">Ohio</option>
                <option value="Oklahoma">Oklahoma</option>
                <option value="Oregon">Oregon</option>
                <option value="Pennsylvania">Pennsylvania</option>
                <option value="Rhode Island">Rhode Island</option>
                <option value="South Carolina">South Carolina</option>
                <option value="South Dakota">South Dakota</option>
                <option value="Tennessee">Tennessee</option>
                <option value="Texas">Texas</option>
                <option value="Utah">Utah</option>
                <option value="Vermont">Vermont</option>
                <option value="Virginia">Virginia</option>
                <option value="Washington">Washington</option>
                <option value="West Virginia">West Virginia</option>
                <option value="Wisconsin">Wisconsin</option>
                <option value="Wyoming">Wyoming</option>
            </select>
    
            <label for="date">Date of Donation:</label>
            <input type="date" id="date" name="date" required>
    
            <label for="details">Donation Details (optional):</label>
            <textarea id="details" name="details" placeholder="Enter donation details"></textarea>
    
            <label for="image">Upload Images (optional):</label>
            <input type="file" id="image" name="image" accept="image/*" multiple>
    
            <label for="affiliation">Affiliation:</label>
            <select id="affiliation" name="affiliation">
                <option value="Elanco Employee">Elanco Employee</option>
                <option value="Elanco Customer">Elanco Customer</option>
                <option value="Family Member">Family Member or Friend</option>
                <option value="Other">Other</option>
            </select>

            <button type="submit">Submit Donation</button>

        </form>
        <div id="loadingBar" style="display: none; text-align: center;">
            <h1>Processing your donation...</h1>
            <div class="loading-spinner"></div>
        </div>
    </section>
    
    <script>
        // Loading Bar Script
        document.getElementById("donationForm").addEventListener("submit", function (event) {
            event.preventDefault();

            const loadingBar = document.getElementById("loadingBar");
            loadingBar.style.display = "block";

            const submitButton = event.target.querySelector('button[type="submit"]');
            submitButton.disabled = true;

            setTimeout(() => {
                alert("Form submitted successfully!");
                loadingBar.style.display = "none";
                submitButton.disabled = false;
            }, 3000);
        });
    </script>

    <section id="donation-list">
        <button id="to-state-map-btn" style="background-color: #007bff; color: #fff;font-family: Arial, 
        sans-serif;font-size: 16px;padding: 10px 20px;border: none;border-radius: 4px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);"
        onmouseover="this.style.boxShadow='0 4px 6px rgba(0,0,0,0.3)'; this.style.transform='translateY(-2px)';"
        onmouseout="this.style.boxShadow='0 2px 4px rgba(0,0,0,0.2)'; this.style.transform='translateY(0)';"
        onmousedown="this.style.boxShadow='0 1px 2px rgba(0,0,0,0.2)'; this.style.transform='translateY(0)';"
        onmouseup="this.style.boxShadow='0 4px 6px rgba(0,0,0,0.3)'; this.style.transform='translateY(-2px)';">
            Back to State Map
            
        </button>
        
        <script>
            // When the button is clicked...
            document.getElementById('to-state-map-btn').addEventListener('click', () => {
              // 1) Remove 'active' from all sections
              document.querySelectorAll('section').forEach(section => {
                section.classList.remove('active');
              });
              // 2) Add 'active' to the #state-map section
              document.querySelector('#state-map').classList.add('active');
              // 3) Remove 'active' from all .tab-link elements
              document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('active');
              });
              // 4) Add 'active' to the tab-link that targets data-tab="donation-list"
              document.querySelector('[data-tab="state-map"]').classList.add('active');
            });
          </script>
        <h2 style="text-align: center;">Donation List</h2>
        <div>
            <label for="sortOptions">Sort By: </label>
            <select id="sortOptions" onchange="sortTable()">
                <option value="" disabled selected>Select</option>
                <option value="name-asc">Name (A-Z)</option>
                <option value="name-desc">Name (Z-A)</option>
                <option value="date-newest">Date (Newest First)</option>
                <option value="date-oldest">Date (Oldest First)</option>
                <option value="state-asc">State (A-Z)</option>
                <option value="state-desc">State (Z-A)</option>
            </select>
        </div>
        <table id="donationTable">
            <thead>
                <tr>
                    <th id="nameHeader">Name</th>
                    <th id="cityHeader">City</th>
                    <th id="stateHeader">State</th>
                    <th id="dateHeader">Date</th>
                    <th>Details</th>
                    <th>Images</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </section>
    
    <script>
        function sortTable() {
            const table = document.getElementById('donationTable');
            const rows = Array.from(table.tBodies[0].rows);
            const sortOption = document.getElementById('sortOptions').value;
            let compare;
    
            // Reset all header styles
            document.getElementById('nameHeader').style.backgroundColor = '';
            document.getElementById('stateHeader').style.backgroundColor = '';
            document.getElementById('dateHeader').style.backgroundColor = '';
    
            switch (sortOption) {
                case 'name-asc':
                    compare = (a, b) => a.cells[0].textContent.localeCompare(b.cells[0].textContent);
                    document.getElementById('nameHeader').style.backgroundColor = 'rgba(255, 0, 0, 0.65)';
                    break;
                case 'name-desc':
                    compare = (a, b) => b.cells[0].textContent.localeCompare(a.cells[0].textContent);
                    document.getElementById('nameHeader').style.backgroundColor = 'rgba(255, 0, 0, 0.65)';
                    break;
                case 'date-newest':
                    compare = (a, b) => new Date(b.cells[3].textContent) - new Date(a.cells[3].textContent);
                    document.getElementById('dateHeader').style.backgroundColor = 'rgba(255, 0, 0, 0.65)';
                    break;
                case 'date-oldest':
                    compare = (a, b) => new Date(a.cells[3].textContent) - new Date(b.cells[3].textContent);
                    document.getElementById('dateHeader').style.backgroundColor = 'rgba(255, 0, 0, 0.65)';
                    break;
                case 'state-asc':
                    compare = (a, b) => a.cells[2].textContent.localeCompare(b.cells[2].textContent);
                    document.getElementById('stateHeader').style.backgroundColor = 'rgba(255, 0, 0, 0.65)';
                    break;
                case 'state-desc':
                    compare = (a, b) => b.cells[2].textContent.localeCompare(a.cells[2].textContent);
                    document.getElementById('stateHeader').style.backgroundColor = 'rgba(255, 0, 0, 0.65)';
                    break;
            }
    
            rows.sort(compare);
    
            // Append sorted rows back to the table body
            const tbody = table.tBodies[0];
            tbody.innerHTML = '';
            rows.forEach(row => tbody.appendChild(row));
        }
    </script>
    
    <section id="state-map">
        <h2 style="text-align: center;">State Map</h2>
        <div class="svg-map">
            <!-- The SVG map will be dynamically loaded here -->
        </div>
    </section>
    
    <section id="contact-us">
        <h2 style="text-align: center;">Contact Us</h2>
        <p style="text-align: center;">If you have any questions, please reach out to Vinton Smith at <a href="mailto:BloodAcrossAmerica@gmail.com">BloodAcrossAmerica@gmail.com</a>.</p>
        <p style="text-align: center;">Connect with us on social media:</p>
        <div style="text-align: center;">
            <a href="https://x.com/vintonesmith" target="_blank" style="margin: 0 10px; text-decoration: none;">
                <img src="images/X_logo.jpg" alt="X" style="width: 50px; height: 50px;">
            </a>
            <a href="https://www.linkedin.com/in/vinton-smith-9524ba1b" target="_blank" style="margin: 0 10px; text-decoration: none;">
                <img src="images/LI_logo.png" alt="LinkedIn" style="width: 50px; height: 50px;">
            </a>
            <a href="https://www.facebook.com/vinton.smith.9" target="_blank" style="margin: 0 10px; text-decoration: none;">
                <img src="images/FB_logo.png" alt="Facebook" style="width: 50px; height: 50px;">
            </a>
        </div>
    </section>
    
    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/geopy@2.3.0/dist/geopy.min.js"></script>
    <script>
        // Initialize EmailJS
        emailjs.init("QYFyYtpsnt4qHEMrh");
    
        // Initialize the map
        const map = L.map('map').setView([37.8, -96], 4);
    
        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 18,
        }).addTo(map);
    
        // Geopy function to get coordinates
        async function getCoordinates(city, state) {
            const url = `https://nominatim.openstreetmap.org/search?city=${city}&state=${state}&format=json`;
            try {
                const response = await fetch(url);
                const data = await response.json();
                if (data.length > 0) {
                    return { lat: data[0].lat, lon: data[0].lon };
                } else {
                    throw new Error('Coordinates not found');
                }
            } catch (error) {
                console.error('Error fetching coordinates:', error);
                return null;
            }
        }
    
        // Load data from JSON file and populate map and table
        fetch('submissions.json')
            .then(response => response.json())
            .then(data => {
                const tableBody = document.querySelector('#donationTable tbody');
    
                data.forEach(donation => {
                    // Add markers to map
                    L.marker([donation.lat, donation.lng]).addTo(map)
                        .bindPopup(
                            `<strong>${donation.name}</strong><br>
                            <strong>City:</strong> ${donation.city}<br>
                            <strong>State:</strong> ${donation.state}<br>
                            <strong>Date:</strong> ${donation.date}<br>
                            <strong>Details:</strong> ${donation.details}<br>
                            ${donation.images ? `<a href="${donation.images}" target="_blank">View Images</a>` : ''}`
                        );
    
                    // Populate table
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${donation.name}</td>
                        <td>${donation.city}</td>
                        <td>${donation.state}</td>
                        <td>${donation.date}</td>
                        <td>${donation.details}</td>
                        <td>${donation.images ? `<img src="${donation.images}" style="max-height: 200px; height: auto;">` : ''}</td>
                    `;
                    tableBody.appendChild(row);
                });
            })
            .catch(error => console.error('Error loading JSON data:', error));
    
        // Handle form submission
        document.getElementById('donationForm').addEventListener('submit', async (e) => {
            e.preventDefault();
    
            const email = document.getElementById('email').value;
            const name = document.getElementById('name').value;
            const city = document.getElementById('city').value;
            const state = document.getElementById('state').value;
            const date = document.getElementById('date').value;
            const details = document.getElementById('details').value || 'No details provided';
            const affiliation = document.getElementById('affiliation').value;
            const images = document.getElementById('image').files;
    
            const imgurClientId = '490650393de9280';
            let imgurLinks = [];
    
            if (images.length > 0) {
                for (const image of images) {
                    const formData = new FormData();
                    formData.append('image', image);
    
                    try {
                        const response = await fetch('https://api.imgur.com/3/image', {
                            method: 'POST',
                            headers: {
                                Authorization: `Client-ID ${imgurClientId}`
                            },
                            body: formData
                        });
    
                        const data = await response.json();
    
                        if (data.success) {
                            imgurLinks.push(data.data.link);
                        } else {
                            console.error('Imgur upload failed', data);
                        }
                    } catch (error) {
                        console.error('Error uploading image to Imgur:', error);
                    }
                }
            }
    
            // Get coordinates
            const coordinates = await getCoordinates(city, state);
    
            // Send data via EmailJS
            emailjs.send("service_0bkytc6", "template_3c5jx6h", {
                reply_to: email,
                name: name,
                city: city,
                state: state,
                date: date,
                details: details,
                affiliation: affiliation,
                images: imgurLinks.join(', '),
                latitude: coordinates ? coordinates.lat : "Not found",
                longitude: coordinates ? coordinates.lon : "Not found"
            }).then((response) => {
                alert("Submission successfully sent!");
                document.getElementById('donationForm').reset();
            }).catch((error) => {
                alert(`Error sending submission: ${error.text || error.message || "Unknown error"}`);
                console.error("EmailJS Error:", error);
            });
        });
    
        // Handle tab navigation
        document.querySelectorAll('.tab-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetTab = e.target.dataset.tab;

                document.querySelectorAll('section').forEach(section => {
                    section.classList.remove('active', 'hidden');
                });

                document.querySelectorAll('.tab-link').forEach(tab => {
                    tab.classList.remove('active');
                });

                document.getElementById(targetTab).classList.add('active');
                e.target.classList.add('active');
            });
        });

        document.getElementById('mobileMenu').addEventListener('change', (e) => {
            const targetTab = e.target.value;

            document.querySelectorAll('section').forEach(section => {
                section.classList.remove('active', 'hidden');
            });

            document.querySelectorAll('.tab-link').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(targetTab).classList.add('active');

            const activeTab = document.querySelector(`.tab-link[data-tab="${targetTab}"]`);
            if (activeTab) activeTab.classList.add('active');
        });

        // Load the SVG dynamically and add hover effects with donation count
        document.addEventListener('DOMContentLoaded', () => {
            fetch('submissions.json')
                .then(response => response.json())
                .then(data => {
                    // Aggregate donations by state using data-id
                    const stateDonations = data.reduce((acc, donation) => {
                        acc[donation.state.trim()] = (acc[donation.state.trim()] || 0) + 1;
                        return acc;
                    }, {});
                        
                    // Function to load and render an SVG map
                    function loadSvgMap(containerSelector, svgFile, scale = 1, enableClick = true) {
                        fetch(svgFile)
                            .then(response => response.text())
                            .then(svgContent => {
                                const container = document.querySelector(containerSelector);
                                container.innerHTML = svgContent;

                                const paths = container.querySelectorAll('path');
                                paths.forEach(path => {
                                    const stateAbbreviation = path.getAttribute('data-id');
                                    const stateFullName = path.getAttribute('data-name');
                                    const donationCount = stateDonations[stateFullName] || 0;

                                    // Choose a base red
                                    const baseColor = '#e63946';

                                    // Function to calculate the fill color based on donation count
                                    function getFillColor(donationCount) {
                                        if (donationCount === 0) {
                                            return '#d3d3d3'; // Gray for no donations
                                        } else {
                                            const effectiveCount = Math.min(donationCount, 10); // Cap at 10 for darkest shade
                                            const fraction = effectiveCount / 10; // Calculate fraction between 0 and 1
                                            return darkenColor(baseColor, fraction); // Darken baseColor based on fraction
                                        }
                                    }

                                    // Initial fill color based on donation count
                                    const originalFillColor = getFillColor(donationCount);
                                    path.style.fill = originalFillColor;

                                    // Add hover effects
                                    path.addEventListener('mouseenter', () => {
                                        // Darken the current color even more (by 0.35 or 35%) only if it's not gray
                                        const hoverColor = donationCount === 0 
                                            ? darkenColor('#d3d3d3', 0.35)
                                            : darkenColor(originalFillColor, 0.45); // Darken otherwise

                                        path.style.fill = hoverColor;

                                        // Tooltip creation
                                        const tooltip = document.createElement('div');
                                        tooltip.id = 'tooltip';
                                        tooltip.style.position = 'absolute';
                                        tooltip.style.background = 'white';
                                        tooltip.style.border = '1px solid black';
                                        tooltip.style.padding = '5px';
                                        tooltip.style.zIndex = '1000';
                                        tooltip.innerHTML = `<strong>${stateFullName}</strong><br>Donations: ${donationCount}`;
                                        document.body.appendChild(tooltip);

                                        // Move tooltip with mouse
                                        path.addEventListener('mousemove', (e) => {
                                            tooltip.style.left = `${e.pageX + 10}px`;
                                            tooltip.style.top = `${e.pageY + 10}px`;
                                        });
                                    });

                                    path.addEventListener('mouseleave', () => {
                                        // Revert to the original fill color (based on donation count)
                                        path.style.fill = originalFillColor;

                                        // Remove tooltip
                                        const tooltip = document.getElementById('tooltip');
                                        if (tooltip) tooltip.remove();
                                    });

                                    // Add click functionality for detailed map only
                                    if (enableClick && containerSelector === '.svg-map') {
                                        path.addEventListener('click', () => {
                                            const stateName = path.getAttribute('data-name'); // Get the full state name from the attribute

                                            // Activate the Donation List section
                                            document.querySelectorAll('section').forEach(section => section.classList.remove('active'));
                                            document.querySelector('#donation-list').classList.add('active');

                                            // Sort the table by state (A-Z)
                                            document.getElementById('sortOptions').value = 'state-asc';
                                            sortTable();

                                            // Scroll to the first row that matches the clicked state
                                            const rows = Array.from(document.querySelectorAll('#donationTable tbody tr'));
                                            const targetRow = rows.find(row => row.cells[2].textContent.trim() === stateName);

                                            if (targetRow) {
                                                // Remove highlight from previously highlighted rows
                                                rows.forEach(row => row.classList.remove('highlight'));

                                                // Highlight the target row
                                                targetRow.classList.add('highlight');

                                                // Scroll the highlighted row into view
                                                targetRow.scrollIntoView({ behavior: 'smooth', block: 'center' });

                                                // Remove highlight with a fade effect after 1 second
                                                setTimeout(() => {
                                                    targetRow.classList.add('fade-highlight');
                                                }, 1000);
                                            } else {
                                                console.warn(`No matching row found for state: ${stateName}`);
                                            }
                                        });
                                    }

                                });

                                // Scale the map for smaller containers
                                container.style.transform = `scale(${scale})`;
                                container.style.transformOrigin = 'top left';

                                // Add button functionality for mini map
                                if (!enableClick && containerSelector === '.mini-svg-map') {
                                    container.addEventListener('click', () => {
                                        const backToStateMapButton = document.getElementById('to-state-map-btn');
                                        if (backToStateMapButton) backToStateMapButton.click();
                                    });
                                }
                            })
                            .catch(error => console.error(`Error loading SVG for ${containerSelector}:`, error));
                    }

                    // Detect mobile devices and adjust scale dynamically
                    const isMobile = window.innerWidth <= 768; // Mobile width threshold
                    const scale = isMobile ? 0.3 : .92; // Smaller scale for mobile

                    // Load the map with the appropriate scale
                    loadSvgMap('.svg-map', 'us.svg', scale);

                    // Load the main map
                    loadSvgMap('.svg-map', 'us.svg');

                    // Load the mini map
                    loadSvgMap('.mini-svg-map', 'us.svg', scale, false);

                    function darkenColor(hex, percent) {
                        const num = parseInt(hex.slice(1), 16);
                        const amt = Math.round(2.55 * percent * -100);
                        const R = (num >> 16) + amt;
                        const G = (num >> 8 & 0x00FF) + amt;
                        const B = (num & 0x0000FF) + amt;
                        return `#${(0x1000000 + (R < 255 ? (R < 1 ? 0 : R) : 255) * 0x10000 + (G < 255 ? (G < 1 ? 0 : G) : 255) * 0x100 + (B < 255 ? (B < 1 ? 0 : B) : 255)).toString(16).slice(1)}`;
                    }
                })
                .catch(error => console.error('Error loading JSON data:', error));
        });     
    </script>
</body>
</html>
